!function(){"use strict";angular.module("itDebugTemplates",[]),angular.module("itDebugPanel",["itDebugTemplates"]).factory("RecursionHelper",["$compile",function(a){return{compile:function(b,c){angular.isFunction(c)&&(c={post:c});var d,e=b.contents().remove();return{pre:c&&c.pre?c.pre:null,post:function(b,f){d||(d=a(e)),d(b,function(a){f.append(a)}),c&&c.post&&c.post.apply(null,arguments)}}}}}]).directive("debugPanel",["$document","$filter",function(a,b){return{restrict:"E",scope:{options:"=",panelVisible:"=?"},templateUrl:"component/templates/debugPanel.tpl.html",link:function(c){c.$watch("options",function(a){console.log("options changed"),c.filteredOptions=b("objectFilter")(a,c.filterText)},!0);var d;c.$watch(function(){return d},function(a){console.log("target options changed"),a&&(c.filteredOptions=b("objectFilter")(a,c.filterText))}),c.$watch("filterText",function(){c.filteredOptions=d?b("objectFilter")(d,c.filterText):b("objectFilter")(c.options,c.filterText)}),c.targetElement=function(){var b,e;console.log("targetElement"),a.bind("mousemove",function f(g){function h(){console.log("mouseout"),j.style.backgroundColor=e,b.unbind("mouseout",h),b.unbind("click",i),b=null}function i(){console.log("click"),j.style.backgroundColor=e,b.unbind("mouseout",h),b.unbind("click",i),a.unbind("mousemove",f),d=b.scope(),c.$apply(),console.log(b.scope()),b=null}var j=document.elementFromPoint(g.clientX,g.clientY);console.log("move"),b||(e=j.style.backgroundColor,j.style.backgroundColor="blue",b=angular.element(j),b.bind("mouseout",h),b.bind("click",i))})},a.bind("keydown",function(a){68==a.keyCode&&a.shiftKey&&a.altKey&&(c.panelVisible=!c.panelVisible,c.$apply())})}}}]).filter("objectFilter",function(){function a(a){return angular.isFunction(a)?"Function":angular.isArray(a)?"Array":angular.isObject(a)?"Object":angular.isNumber(a)?"Number":"boolean"==typeof a?"Boolean":"Default"}function b(b,c,d,e){this.isActive=c,this.children=[],this.obj=b,this.key=d,this.value=b[d],this.parent=e,this.type=a(this.value)}function c(a,d,e){angular.forEach(a,function(f,g){if(!g||!g.indexOf||-1==g.indexOf("$")&&"this"!==g){var h=new b(a,e,g,d);d.addChild(h),angular.isObject(f)&&c(f,h,e)}})}function d(a){for(var b=a.parent;b;)b.isActive=!0,b=b.parent}function e(a){angular.forEach(a.children,function(a){a.isActive=!0,e(a)})}function f(a,b){angular.forEach(a.children,function(a){a.matches(b)?(d(a),e(a),a.isActive=!0):f(a,b)})}return b.prototype.addChild=function(a){this.children.push(a)},b.prototype.matches=function(a){return this.key&&this.key.indexOf&&-1!=this.key.indexOf(a)||this.value&&this.value.indexOf&&-1!=this.value.indexOf(a)},function(a,d){if(a){var e=new b(a);return d&&""!=d?(c(a,e,!1),f(e,d)):c(a,e,!0),e}}}).directive("optionsForm",["RecursionHelper",function(a){return{restrict:"E",scope:{treeNode:"="},templateUrl:"component/templates/optionsForm.tpl.html",compile:function(b){return a.compile(b,function(a){a.arrayVisible=!0,a.isObject=function(a){return angular.isObject(a)}})}}}]).directive("myDraggable",["$document",function(a){return function(b,c){function d(a){i=a.pageY-g,h=a.pageX-f,c.css({top:i+"px",left:h+"px"})}function e(){a.off("mousemove",d),a.off("mouseup",e)}var f=0,g=0,h=0,i=0;c.on("mousedown",function(b){b.preventDefault(),f=b.pageX-h,g=b.pageY-i,a.on("mousemove",d),a.on("mouseup",e)})}}]).directive("blockMouseDown",function(){return{restrict:"A",link:function(a,b){b.on("mousedown",function(a){a.stopImmediatePropagation()})}}})}(),angular.module("itDebugTemplates",["component/templates/debugPanel.tpl.html","component/templates/optionsForm.tpl.html"]),angular.module("component/templates/debugPanel.tpl.html",[]).run(["$templateCache",function(a){a.put("component/templates/debugPanel.tpl.html",'<div class="debugPanelWrapper" ng-show="panelVisible">\n  <div class="debugPanel panel panel-default" my-draggable>\n    <div class="panel-heading">\n      <span class="pull-right" ng-click="panelVisible=false">\n        <i class="glyphicon glyphicon-remove"></i>\n      </span>\n      <h3 class="panel-title">Debug Panel</h3>\n      <button ng-click="targetElement()">\n        <i ng-click="filterText = \'\'" class="glyphicon glyphicon-screenshot"></i>\n        Inspect\n      </button>\n      <div>\n        <input placeholder="Filter" type="text" block-mouse-down ng-model="filterText" >\n        <i ng-click="filterText = \'\'" class="glyphicon glyphicon-remove-circle"></i>\n      </div>\n    </div>\n    <options-form tree-node="filteredOptions">\n    </options-form>\n  </div>\n</div>')}]),angular.module("component/templates/optionsForm.tpl.html",[]).run(["$templateCache",function(a){a.put("component/templates/optionsForm.tpl.html",'<div ng-repeat="node in treeNode.children track by $index">\n  <div ng-if="node.children.length>0&&node.isActive" class="well well-sm">\n    <div block-mouse-down ng-click="visible=!visible" class="elementRow" ng-class="{\'selected\':visible}">Object: {{node.key}}</div>\n    <options-form ng-show="visible" tree-node="node">\n    </options-form>\n    <br/>\n  </div>\n  <div class="container-fluid" ng-if="node.children.length==0&&node.isActive">\n    <div class="row">\n      <div class="col-xs-8">\n        {{node.key}}:\n      </div>\n      <div ng-switch="node.type">\n        <input ng-switch-when="Boolean" block-mouse-down class="col-xs-4" type="checkbox" ng-model="node.obj[node.key]">\n        <input ng-switch-when="Number" block-mouse-down class="col-xs-4" type="number" ng-model="node.obj[node.key]">\n        <span ng-switch-when="Function">\n          Function\n        </span>\n        <input ng-switch-default block-mouse-down class="col-xs-4" type="text" ng-model="node.obj[node.key]">\n      </div>\n    </div>\n  </div>\n</div>')}]);